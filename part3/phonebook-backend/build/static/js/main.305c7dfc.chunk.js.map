{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/SuccessNotification.js","components/ErrorNotification.js","App.js","index.js"],"names":["Persons","persons","deletePerson","map","person","name","number","onClick","id","Filter","newSearch","handleSearch","onChange","value","PersonForm","submit","onSubmit","type","baseUrl","newObject","axios","post","then","response","data","get","put","delete","SuccessNotification","message","className","display","ErrorNotification","App","useState","setPersons","nameAndNumber","setNameAndNumber","setNewSearch","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","successContent","setTimeout","errorContent","handleSubmit","event","a","preventDefault","includes","newPerson","concat","catch","error","console","log","personInArray","filter","window","confirm","returnedPerson","handleDelete","p","target","toLowerCase","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.305c7dfc.chunk.js","sourcesContent":["import React from 'react';\n\nconst Persons = ({ persons, deletePerson }) => {\n    const showPersons = () =>\n        persons.map((person) => (\n            <div key={person.name}>\n                {person.name} {person.number}\n                {\" \"}\n                <button onClick={() => deletePerson(person.id, person.name)}>delete</button>\n            </div>\n        ));\n    return <>{showPersons()}</>;\n};\nexport default Persons;\n","import React from 'react';\n\nconst Filter = ({ newSearch, handleSearch }) => {\n    return (\n        <div>\n            filter shown with <input onChange={handleSearch} value={newSearch} name=\"search\" />\n        </div>\n    );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({ person, onChange, submit }) => {\n    const { name, number } = person;\n    return (\n        <form onSubmit={submit}>\n            <div>\n                name: <input onChange={onChange} value={name} name=\"name\" />\n            </div>\n            <div>\n                number: <input onChange={onChange} value={number} name=\"number\" />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;\n","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then((response) => response.data);\n};\n\nexport default { create, getAll, update, deletePerson };\n","import React from 'react';\n\nconst SuccessNotification = ({ message }) => {\n    const display = () => {\n        if (message!==null){\n            return <div className=\"success\">{message}</div>\n        }\n    }\n    return <>{display()}</>;\n};\n\nexport default SuccessNotification;\n","import React from 'react';\n\nconst ErrorNotification = ({ message }) => {\n    const display = () => {\n        if (message!==null){\n            return <div className=\"error\">{message}</div>\n        }\n    }\n    return <>{display()}</>;\n};\n\nexport default ErrorNotification;\n","import React, { useState, useEffect } from 'react';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport personService from './services/persons';\nimport SuccessNotification from './components/SuccessNotification';\nimport './index.css';\nimport ErrorNotification from './components/ErrorNotification';\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [nameAndNumber, setNameAndNumber] = useState({ name: '', number: '' });\n    const [newSearch, setNewSearch] = useState('');\n    const [successMessage, setSuccessMessage] = useState(null);\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    const { name } = nameAndNumber;\n\n    useEffect(() => {\n        personService.getAll().then((persons) => {\n            setPersons(persons);\n        });\n    }, []);\n\n    const successContent = (message) => {\n        setSuccessMessage(message);\n        setTimeout(() => {\n            setSuccessMessage(null);\n        }, 5000);\n    };\n\n    const errorContent = (message) => {\n        setErrorMessage(message);\n        setTimeout(() => {\n            setErrorMessage(null);\n        }, 5000);\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n\n        const indexOfPerson = persons.map((person) => person.name).includes(name);\n\n        if (!indexOfPerson) {\n            await personService\n                .create(nameAndNumber)\n                .then((newPerson) => {\n                    setPersons(persons.concat(newPerson));\n                    successContent(`Added ${newPerson.name}`);\n                    setNameAndNumber({ number: '', name: '' });\n                })\n                .catch((error) => {\n                    errorContent(error, error.message);\n                    console.log(error.response.data);\n                });\n        } else {\n            const personInArray = persons.filter((person) => person.name === name);\n            const id = personInArray[0].id;\n\n            window.confirm(\n                `${nameAndNumber.name} is already added to the phonebook, replace the old number with a new one?`,\n            );\n            personService\n                .update(id, { ...nameAndNumber, id: id })\n                .then((returnedPerson) => {\n                    setPersons(\n                        persons.map((person) =>\n                            person.id === id\n                                ? {\n                                      ...nameAndNumber,\n                                      id: returnedPerson.id,\n                                  }\n                                : person,\n                        ),\n                    );\n                    successContent(`Update ${returnedPerson.name}`);\n                })\n                .catch((error) => {\n                    console.log(error.response.data);\n                });\n        }\n    };\n\n    const handleDelete = async (id, name) => {\n        if (window.confirm(`Delete ${name}?`)) {\n            personService\n                .deletePerson(id)\n                .then(() => {\n                    setPersons(persons.filter((p) => p.id !== id));\n                    setSuccessMessage(`Information of ${name} has been removed from the server`);\n                })\n                .catch((error) => {\n                    errorContent(`Information of ${name} has already been remove from server`);\n                    console.log(error.response.data);\n                });\n        }\n    };\n\n    const handleChange = (event) => {\n        event.preventDefault();\n        const { value, name } = event.target;\n        nameAndNumber[name] = value;\n        setNameAndNumber({ ...nameAndNumber });\n    };\n\n    const handleSearch = (event) => setNewSearch(event.target.value);\n\n    const showPersons = () => persons.filter((person) => person.name.toLowerCase().includes(newSearch.toLowerCase()));\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <SuccessNotification message={successMessage} />\n            <ErrorNotification message={errorMessage} />\n            <Filter newSearch={newSearch} handleSearch={handleSearch} />\n\n            <h3>add a new</h3>\n            <PersonForm person={nameAndNumber} onChange={handleChange} submit={handleSubmit} />\n\n            <h3>Numbers</h3>\n            <Persons persons={showPersons()} deletePerson={handleDelete} />\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}